sequenceDiagram
Title: DID Delete

participant Subject as DID Subject
participant API as API-Appnet
participant Database as Database
participant DIDSDK as DID SDK
participant HCS as Hedera HCS

note over Subject,HCS: (Hard) delete a DID Document
Subject ->> API: Send Hedera DID to endpoint (Secured by HTTP Signature)
API ->> API: Check Message Signing in HTTP Header
API ->> Database: Resolve DID through Projection
Database ->> API: Receive DID Document
API ->> API: Check Signature message signing with Delegate Key of DID Document
alt Signature validation fails
API ->> Subject: Return Response Message "Not Authorised"
else Signature validation success
API ->> Database: Find DidKeypair
Database ->> API: Resolve DidKeypair
API ->> DIDSDK: Delete Event
DIDSDK ->> HCS: Delete Event
HCS ->> DIDSDK: Ack
DIDSDK ->> API: Ack
API ->> Database: Purge Database
API ->> Subject: Return Response Message
end